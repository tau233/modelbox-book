# AI应用模式

## 模式简介

1. 标准模式

    ![modelbox-app-mode1 alt rect_w_400](../assets/images/figure/get-start/app_develop_mode1.png)

    如上图所示，此模式下AI应用被设计为两个部分：ModelBox部分和应用部分。
    * ModelBox部分：这种模式下AI应用的主入口由ModelBox管理，启动时，首先进入ModelBox部分，会读取ModelBox配置，加载配置中选择的插件列表，初始化并启动所有的插件，至此完成ModelBox部分的主要工作。插件在ModelBox部分起着重要的作用，被设计来完成应用部分的管理工作。ModelBox内置了两个插件：ModelBox插件，用于加载流程图来启动应用部分，具体请见[ModelBox插件](../plugins/modelbox-plugin/modelbox-plugin.md); Editor插件，用于开发时可视化管理应用部分的工作，如执行样例应用、可视化编排流程图等，具体请见[Editor插件](../tools/editor/editor.md)。

    * 应用部分：此部分是应用的全部逻辑承载，开发者首先通过流程图配置文件描述整个应用的数据处理过程，然后实现流程图中缺少的节点，完成整个应用。

1. SDK模式

    ![modelbox-app-mode2 alt rect_w_500](../assets/images/figure/get-start/app_develop_mode2.png)

    如上图所示，此模式下AI应用被设计为两个部分：业务部分和算法部分。

    * 业务部分：在这个模式下，取代了ModelBox部分，作为AI应用的主入口，启动后，由业务部分通过ModelBox提供的API管理算法部分的初始化、启动及调用。

    * 算法部分：算法相关的执行逻辑。此部分中，开发者可以通过API静态的编排逻辑、使用已有的流程图配置文件、或者通过solution使用预置的逻辑，逻辑加载后会生成Flow对象，可以通过对象提供的数据输入输出接口完成对算法的调用，Flow可以存在多个，即可以加载多个算法逻辑。

## 模式选择

进行开发之前，需要先选择如何使用ModelBox帮助应用开发，以下是两种模式开发所需的工作、特性、场景推荐的介绍：

1. 工作：

    * 标准模式时，主要关心如何在应用部分编排全部的应用逻辑，需要将应用拆分成流程图形式，ModelBox已有节点可以直接在编排中使用，缺失的节点，则要完成节点开发工作。默认情况下，使用已有的ModelBox插件管理应用部分的启动，如有特殊需要，还可以开发插件对应用部分进行自定义的管理。

    * SDK模式时，需要先确定哪些算法部分要作为流程图，一个应用可以包含多个流程图，每个流程图完成确定的算法逻辑。和标准模式一样完成流程图后，还需要在业务部分实现算法逻辑的调用，完成数据的传入传出。

1. 特性：

    流程图的方式，可以获得：使用ModelBox提供的已有节点能力；多个节点可以并发调度，提供并发度和批处理能力；单个节点可以使用多硬件。因此考虑逻辑编排成图的时候，可以考虑收益是否达到预期。

    标准模式可以使用ModelBox提供的插件能力，开发节点可以使用此模式的Editor进行流程图开发。使用此模式也可以只通过流程图配置和自定义节点完成一个AI应用，并且可以收获到样例工程创建和一键打包的功能。

    SDK模式下，主入口由用户控制，项目由开发者创建，算法部分的复杂度，算法部分的数量均由开发者决定，自由度较高。同时应用的打包需要由开发者考虑。

1. 场景：

    * 标准模式场景：只需编写自定义节点和编排流程图即完成应用开发；需开发插件简单管理应用部分；

    * SDK模式场景：应用逻辑不能全部进入流程图中，例如存在多个算法部分配合使用，控制逻辑较为复杂的场景。
